#ifndef CONFIG_H
#define CONFIG_H

// ============================================================================
// CONFIGURA√á√ÉO ESP32 - SENSOR DE DIRE√á√ÉO - TEMPLATE
// ============================================================================
// 
// INSTRU√á√ïES DE CONFIGURA√á√ÉO:
// 1. Copie este ficheiro para config.h: cp config.h.example config.h
// 2. Altere os valores conforme o seu ambiente
// 3. NUNCA commite o ficheiro config.h real no Git
// 4. Teste a configura√ß√£o antes de fazer upload
//
// ============================================================================

// ============================================================================
// üåê CONFIGURA√á√ïES DE REDE WIFI
// ============================================================================

// WiFi - ALTERE PARA AS SUAS CREDENCIAIS
#define WIFI_SSID "SUA_REDE_WIFI_AQUI"           // Nome da sua rede WiFi
#define WIFI_PASSWORD "SUA_SENHA_WIFI_AQUI"      // Senha da sua rede WiFi
#define WIFI_TIMEOUT_MS 15000                    // Timeout de conex√£o (15 segundos)

// Configura√ß√µes avan√ßadas WiFi
#define WIFI_MAX_RETRY 3                         // M√°ximo tentativas de conex√£o
#define WIFI_RECONNECT_INTERVAL 30000            // Intervalo reconex√£o (30s)

// ============================================================================
// üì° CONFIGURA√á√ïES LORA
// ============================================================================

// Frequ√™ncia e modula√ß√£o
#define LORA_FREQUENCY 433E6                     // Frequ√™ncia LoRa (433MHz)
#define LORA_BANDWIDTH 125E3                     // Largura de banda (125kHz)
#define LORA_SPREADING_FACTOR 7                  // Fator de espalhamento (7-12)
#define LORA_CODING_RATE 5                       // Taxa de codifica√ß√£o (4/5)
#define LORA_TX_POWER 20                         // Pot√™ncia TX (20dBm)
#define LORA_SYNC_WORD 0x12                      // Palavra de sincroniza√ß√£o

// Configura√ß√µes avan√ßadas LoRa
#define LORA_PREAMBLE_LENGTH 8                   // Comprimento pre√¢mbulo
#define LORA_CRC_ON true                         // Habilitar CRC
#define LORA_IMPLICIT_HEADER false               // Cabe√ßalho impl√≠cito

// ============================================================================
// üîå CONFIGURA√á√ïES DE HARDWARE (ESP32 Heltec V2)
// ============================================================================

// Pinos LoRa
#define LORA_SS 18                               // Chip Select (CS)
#define LORA_RST 14                              // Reset
#define LORA_DIO0 26                             // DIO0 (IRQ)

// Display OLED
#define SCREEN_WIDTH 128                         // Largura do display
#define SCREEN_HEIGHT 64                         // Altura do display
#define OLED_RESET 16                            // Reset do display
#define OLED_SDA 4                               // SDA (I2C)
#define OLED_SCL 15                              // SCL (I2C)
#define OLED_ADDRESS 0x3C                        // Endere√ßo I2C

// LEDs de status
#define LED_STATUS 25                            // LED de status
#define LED_DIRECTION_NORTH 2                    // LED dire√ß√£o norte
#define LED_DIRECTION_SOUTH 13                   // LED dire√ß√£o sul

// Bot√µes (se houver)
#define BUTTON_BOOT 0                            // Bot√£o BOOT
#define BUTTON_USER 12                           // Bot√£o do utilizador

// ============================================================================
// üéØ CONFIGURA√á√ïES DO SISTEMA
// ============================================================================

// Identifica√ß√£o do dispositivo
#define DEVICE_ID "DIR_001"                      // ID √∫nico do dispositivo
#define FIRMWARE_VERSION "2.0.0"                // Vers√£o do firmware
#define HARDWARE_VERSION "ESP32_HELTEC_V2"      // Vers√£o do hardware
#define DEVICE_TYPE "SENSOR_DIRECAO"             // Tipo de dispositivo

// Posicionamento do sensor
#define SENSOR_POSITION "NORTE"                  // Posi√ß√£o: "NORTE" ou "SUL"
#define SENSOR_DISTANCE_FROM_BARRIER 50          // Dist√¢ncia da barreira (metros)
#define SENSOR_LANE "ENTRADA"                    // Faixa: "ENTRADA" ou "SAIDA"

// Configura√ß√µes de detec√ß√£o de dire√ß√£o
#define AOA_CALCULATION_SAMPLES 10               // Amostras para c√°lculo AoA
#define AOA_CONFIDENCE_THRESHOLD 0.7             // Confian√ßa m√≠nima AoA
#define DIRECTION_DETECTION_TIMEOUT 5000         // Timeout detec√ß√£o dire√ß√£o (5s)

// ============================================================================
// ‚è±Ô∏è TIMEOUTS E INTERVALOS
// ============================================================================

// Intervalos de comunica√ß√£o
#define HEARTBEAT_INTERVAL 60000                // Intervalo heartbeat (60s)
#define STATUS_UPDATE_INTERVAL 30000            // Atualiza√ß√£o status (30s)
#define DISPLAY_UPDATE_INTERVAL 1000            // Atualiza√ß√£o display (1s)

// Timeouts do sistema
#define LORA_SEND_TIMEOUT 5000                  // Timeout envio LoRa (5s)
#define DIRECTION_CALCULATION_TIMEOUT 3000      // Timeout c√°lculo dire√ß√£o (3s)

// Intervalos de manuten√ß√£o
#define MEMORY_CHECK_INTERVAL 300000            // Verifica√ß√£o mem√≥ria (5 minutos)
#define BATTERY_CHECK_INTERVAL 600000           // Verifica√ß√£o bateria (10 minutos)
#define CALIBRATION_CHECK_INTERVAL 3600000     // Verifica√ß√£o calibra√ß√£o (1 hora)

// ============================================================================
// üîß CONFIGURA√á√ïES DE DEBUG E DESENVOLVIMENTO
// ============================================================================

// Debug serial
#define DEBUG_SERIAL true                       // Habilitar debug serial
#define DEBUG_LORA false                        // Debug espec√≠fico LoRa
#define DEBUG_AOA false                         // Debug espec√≠fico AoA
#define DEBUG_DIRECTION false                   // Debug espec√≠fico dire√ß√£o
#define DEBUG_WIFI false                        // Debug espec√≠fico WiFi
#define SERIAL_BAUD_RATE 115200                 // Velocidade serial

// Configura√ß√µes de desenvolvimento
#define ENABLE_SERIAL_COMMANDS true             // Comandos via serial
#define ENABLE_TEST_MODE false                  // Modo de teste
#define SIMULATE_DIRECTIONS false               // Simular detec√ß√µes dire√ß√£o

// ============================================================================
// üõ°Ô∏è CONFIGURA√á√ïES DE SEGURAN√áA E ROBUSTEZ
// ============================================================================

// Thresholds de sinal
#define MIN_RSSI_THRESHOLD -100                 // RSSI m√≠nimo para comunica√ß√£o
#define MAX_RSSI_THRESHOLD -30                  // RSSI m√°ximo v√°lido
#define MIN_SNR_THRESHOLD -10                   // SNR m√≠nimo
#define AOA_NOISE_THRESHOLD 5.0                 // Threshold ru√≠do AoA (graus)

// Watchdog (para produ√ß√£o)
#define ENABLE_WATCHDOG false                   // Habilitar watchdog
#define WATCHDOG_TIMEOUT 30000                  // Timeout watchdog (30s)

// Criptografia LoRa (se implementada)
// #define LORA_ENCRYPTION_KEY "chave_16_bytes"  // Chave de criptografia
// #define LORA_USE_ENCRYPTION false             // Habilitar criptografia

// ============================================================================
// üé® CONFIGURA√á√ïES DE DISPLAY
// ============================================================================

// Configura√ß√µes visuais
#define DISPLAY_CONTRAST 255                    // Contraste do display (0-255)
#define DISPLAY_TIMEOUT 0                       // Timeout display (0=sempre ligado)
#define DISPLAY_FLIP false                      // Inverter display
#define DISPLAY_FONT_SIZE 1                     // Tamanho da fonte

// Configura√ß√µes de interface
#define SHOW_RSSI_ON_DISPLAY true               // Mostrar RSSI no display
#define SHOW_AOA_ON_DISPLAY true                // Mostrar AoA no display
#define SHOW_DIRECTION_ON_DISPLAY true          // Mostrar dire√ß√£o no display
#define SHOW_CONFIDENCE_ON_DISPLAY false        // Mostrar confian√ßa no display

// ============================================================================
// üîã CONFIGURA√á√ïES DE ENERGIA
// ============================================================================

// Gest√£o de energia
#define ENABLE_POWER_SAVING false               // Habilitar economia energia
#define LOW_POWER_MODE_THRESHOLD 20             // Threshold modo baixo consumo (%)
#define BATTERY_VOLTAGE_MIN 3.3                 // Tens√£o m√≠nima bateria (V)

// Sleep modes
#define ENABLE_LIGHT_SLEEP false                // Habilitar light sleep
#define LIGHT_SLEEP_DURATION 1000               // Dura√ß√£o light sleep (1s)
#define ENABLE_DEEP_SLEEP false                 // Habilitar deep sleep
#define DEEP_SLEEP_DURATION 300000000           // Dura√ß√£o deep sleep (5 minutos)

// ============================================================================
// üìä CONFIGURA√á√ïES DE TELEMETRIA
// ============================================================================

// Dados a coletar
#define COLLECT_RSSI true                       // Coletar RSSI
#define COLLECT_SNR true                        // Coletar SNR
#define COLLECT_AOA true                        // Coletar dados AoA
#define COLLECT_DIRECTION_STATS true            // Coletar estat√≠sticas dire√ß√£o
#define COLLECT_BATTERY true                    // Coletar n√≠vel bateria
#define COLLECT_MEMORY true                     // Coletar uso mem√≥ria
#define COLLECT_CALIBRATION_DATA false          // Coletar dados calibra√ß√£o

// ============================================================================
// üß≠ CONFIGURA√á√ïES ESPEC√çFICAS DE AoA (ANGLE OF ARRIVAL)
// ============================================================================

// Algoritmo AoA
#define AOA_ALGORITHM "MUSIC"                    // Algoritmo: "MUSIC", "ESPRIT", "SIMPLE"
#define AOA_ANTENNA_SPACING 0.125               // Espa√ßamento antenas (metros)
#define AOA_FREQUENCY_CORRECTION true           // Corre√ß√£o frequ√™ncia
#define AOA_PHASE_CALIBRATION true              // Calibra√ß√£o fase

// Filtros AoA
#define AOA_ENABLE_KALMAN_FILTER false          // Habilitar filtro Kalman
#define AOA_ENABLE_MOVING_AVERAGE true          // Habilitar m√©dia m√≥vel
#define AOA_MOVING_AVERAGE_SAMPLES 5            // Amostras m√©dia m√≥vel

// ============================================================================
// üöÄ CONFIGURA√á√ïES DE PRODU√á√ÉO
// ============================================================================
// 
// Para ambiente de produ√ß√£o, considere alterar:
// - DEBUG_SERIAL = false (desabilitar debug)
// - ENABLE_WATCHDOG = true (habilitar watchdog)
// - ENABLE_POWER_SAVING = true (economia energia)
// - LORA_USE_ENCRYPTION = true (habilitar criptografia)
// - AOA_ENABLE_KALMAN_FILTER = true (melhor precis√£o)
// - Calibrar antenas para ambiente espec√≠fico
// - Otimizar thresholds para condi√ß√µes locais
//
// ============================================================================

#endif // CONFIG_H

// ============================================================================
// üìã EXEMPLOS DE CONFIGURA√á√ÉO POR POSI√á√ÉO
// ============================================================================
//
// SENSOR NORTE ENTRADA:
// #define DEVICE_ID "DIR_N_ENT"
// #define SENSOR_POSITION "NORTE"
// #define SENSOR_LANE "ENTRADA"
//
// SENSOR NORTE SA√çDA:
// #define DEVICE_ID "DIR_N_SAI"
// #define SENSOR_POSITION "NORTE"
// #define SENSOR_LANE "SAIDA"
//
// SENSOR SUL ENTRADA:
// #define DEVICE_ID "DIR_S_ENT"
// #define SENSOR_POSITION "SUL"
// #define SENSOR_LANE "ENTRADA"
//
// SENSOR SUL SA√çDA:
// #define DEVICE_ID "DIR_S_SAI"
// #define SENSOR_POSITION "SUL"
// #define SENSOR_LANE "SAIDA"
//
// ============================================================================

// ============================================================================
// ‚ö†Ô∏è NOTAS IMPORTANTES DE SEGURAN√áA
// ============================================================================
//
// üîí NUNCA commite o ficheiro config.h real
// üåê Use credenciais WiFi seguras (se aplic√°vel)
// üß≠ Calibre sensores AoA adequadamente
// üîã Configure gest√£o de energia adequadamente
// üõ°Ô∏è Habilite watchdog em produ√ß√£o
// üì° Configure criptografia LoRa para dados sens√≠veis
// üîß Desabilite debug em produ√ß√£o
// üìä Monitore precis√£o AoA regularmente
//
// ============================================================================